{
    "app-id" : "fr.etnadji.dispremi",
    "runtime" : "org.gnome.Platform",
    "runtime-version" : "40",
    "sdk" : "org.gnome.Sdk",
    "command" : "dispremi",
    "finish-args" : [
        "--share=ipc",
        "--socket=fallback-x11",
        "--socket=wayland",
        "--filesystem=host",
        "--device=dri"
    ],
    "cleanup-commands" : [
        "mkdir -p /app/lib/ffmpeg"
    ],
    "cleanup" : [
        "/include",
        "/lib/pkgconfig",
        "/man",
        "/share/doc",
        "/share/gtk-doc",
        "/share/man",
        "/share/pkgconfig",
        "*.la",
        "*.a"
    ],
    "modules" : [
        {
            "name" : "python3-appdirs",
            "buildsystem" : "simple",
            "build-commands" : [
                "pip3 install --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} appdirs"
            ],
            "sources" : [
                {
                    "type" : "file",
                    "url" : "https://files.pythonhosted.org/packages/48/69/d87c60746b393309ca30761f8e2b49473d43450b150cb08f3c6df5c11be5/appdirs-1.4.3.tar.gz",
                    "sha256" : "9e5896d1372858f8dd3344faf4e5014d21849c756c8d5701f78f8a103b372d92"
                }
            ]
        },
        {
            "name": "chrpath",
            "cleanup": ["*"],
            "sources": [
                {
                  "type": "archive",
                  "url": "http://deb.debian.org/debian/pool/main/c/chrpath/chrpath_0.16.orig.tar.gz",
                  "sha256": "bb0d4c54bac2990e1bdf8132f2c9477ae752859d523e141e72b3b11a12c26e7b"
                }
            ]
        },
        {
            "name": "ffmpeg",
            "cleanup": [
                "/include",
                "/lib/pkgconfig",
                "/share/ffmpeg/examples"
            ],
            "config-opts": [
                "--enable-shared",
                "--disable-static",
                "--disable-ffplay",
                "--disable-ffprobe",
                "--disable-doc",
                "--disable-network"
            ],
            "post-install": [
                "chrpath -d /app/bin/ffmpeg"
            ],
            "sources": [
                {
                  "type": "archive",
                  "url": "https://ffmpeg.org/releases/ffmpeg-4.4.tar.xz",
                  "sha256": "06b10a183ce5371f915c6bb15b7b1fffbe046e8275099c96affc29e17645d909"
                }
            ]
        },
        {
            "name" : "dispremi",
            "builddir" : true,
            "buildsystem" : "meson",
            "sources" : [
                {
                    "type" : "git",
                    "url" : "https://framagit.org/etnadji/dispremi.git",
                    "tag": "v-2021-08-07",
                    "commit": "0c1fd1230c0390fd1d5a723a9c46589f95d9ba5c"
                }
            ]
        }
    ]
}
